{{- /* HOW TO USE
{{< image
  type="image OR imagecoverattrib"

  height=""
  width=""

  src=""
  link=""
  linkrel="me noopener external"

  title="formal title"
  caption="description"
  alt=""

  attribalign=""

  licensecode="any OR cc0 OR publicdomain OR allrightsreserved"
  licenseurl=""
  licensename=""

  attribto=""
  attriburl=""
  attribrel="me noopener external"

  cc0country=""
  cc0countrycode=""
  cc0countryurl=""

  isrepresentativeofpage=false
  acquirelicensepage=""
  copyrightnotice=""
  credittext=""
  datecreated=""
  datepublished=""
  inlanguage=""
  embeddedtextcaption=""
  thumbnailurl=""
  imgheight=""
  imgwidth=""
  contentloc=""
  contentlocurl=""
  contentlocrel="me noopner external"
  contentreferencetime=""
>}}
*/ -}}
{{- $type := .Get "type" | default "image" -}}
{{- $height := .Get "height" | default "90%" -}}
{{- $width := .Get "width" | default "90%" -}}
{{- $src := .Get "src" -}}
{{- $link := .Get "link" -}}
{{- $linkrel := .Get "linkrel" | default "noopener external nofollow" -}}
{{- $title := .Get "title" -}}
{{- $caption := .Get "caption" -}}
{{- $alt := .Get "alt" -}}
{{- $attribalign := .Get "attribalign" | default "txt_center" -}}
{{- $licensecode := .Get "licensecode" | default "allrightsreserved" -}}
{{- $licenseurl := .Get "licenseurl" -}}
{{- $licensename := .Get "licensename" | default "All Rights Reserved" -}}
{{- $attribto := .Get "attribto" -}}
{{- $attriburl := .Get "attriburl" -}}
{{- $attribrel := .Get "attribrel" | default "noopener external nofollow" -}}
{{- $cc0country := .Get "cc0country" -}}
{{- $cc0countrycode := .Get "cc0countrycode" -}}
{{- $cc0countryurl := .Get "cc0countryurl" -}}
{{- $datecreated := .Get "datecreated" -}}
{{- $contentloc := .Get "contentloc" -}}
{{- $contentlocurl := .Get "contentlocurl" -}}
{{- $contentlocrel := .Get "contentlocrel" | default "noopener external nofollow" -}}
{{- $contentreferencetime := .Get "contentreferencetime" -}}
{{- if eq $type "imagecoverattrib" }}
  <div class="header_attribution">
    <footer class="attribution_copyright">
{{ else }}
  {{- /* keep <figure> centered, if we want to change the image alignment itself, it should be done inside figure */ -}}
  <figure class="figure_box txt_center">
    <div>
      {{ with $link }}<a href="{{ . }}" rel="{{ with $linkrel }}{{ . }}{{ end }}">{{ end }}
      <img loading="lazy" src="{{ $src }}"{{ with or $alt $caption $title }} alt="{{ . | plainify }}"{{ end }}{{ with $height }} height="{{ . }}"{{ end }}{{ with $width }} width="{{ . }}"{{ end }} />{{ with $link }}</a>{{ end }}
    </div>
    <figcaption class="attribution_caption {{ with $attribalign }}{{ . }}{{ end }}">
      {{ with $title }}<p>「<b>{{ . | markdownify }}</b>」</p>{{ end }}
      {{ with $caption }}<p><i>{{ . | markdownify }}</i></p>{{ end }}
{{ end -}}

      <p xmlns:dct="http://purl.org/dc/terms/" xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#">
        {{- if eq $licensecode "allrightsreserved" }}
          {{/* ALL RIGHTS RESERVED */}}
          <small>{{ if eq $type "imagecoverattrib" }}{{ i18n "word_coverimage" }} {{ i18n "attribution_allrightsreservedcover" }}{{ else }}{{ i18n "attribution_allrightsreserved" }}{{ end }}{{ with $attribto }} {{ i18n "word_to" }} {{ with $attriburl }}<a href="{{ . }}" rel="dct:creator {{ with $attribrel }}{{ . }}{{ end }}">{{ end }}{{ . | markdownify }}{{ end }}{{ with $attriburl }}</a>{{ end }}{{ i18n "punctuation_fullstop" }}</small>
        {{ else if eq $licensecode "cc0" }}
          {{/* CC0 DEDICATION */}}
          <small>{{ if eq $type "imagecoverattrib" }}{{ i18n "word_coverimage" }} {{ end }}{{ i18n "attribution_cc0_extent" }}{{ i18n "punctuation_pause" }} <a href="{{ $attriburl }}" rel="dct:publisher {{ with $attribrel }}{{ . }}{{ end }}">{{ $attribto }}</a> {{ i18n "word_has" }} <a href="https://creativecommons.org/publicdomain/zero/1.0/" rel="license noopener external nofollow">{{ i18n "attribution_cc0_waived" }}</a> {{ i18n "word_to" }} 「{{ with $link }}<a href="{{ . }}" rel="dct:title {{ with $linkrel }}{{ . }}{{ end }}">{{ end }}{{ with or $title $alt $caption }}{{ . | markdownify }}{{ end }}{{ with $link }}</a>{{ end }}」{{ i18n "punctuation_fullstop" }} {{ i18n "attribution_cc0_publishedfrom" }} <span property="vcard:Country" datatype="dct:ISO3166" content="{{ $cc0countrycode }}" about="{{ $cc0countryurl }}">{{ $cc0country }}</span>{{ i18n "punctuation_fullstop" }}</small>
        {{ else }}
          <small>
            {{ if eq $type "imagecoverattrib" }}{{ i18n "word_coverimage" }} {{ end }}「{{ with $link }}<a href="{{ . }}" rel="dct:title {{ with $linkrel }}{{ . }}{{ end }}">{{ end }}{{ with or $title $alt $caption }}{{ . | markdownify }}{{ end }}{{ with $link }}</a>{{ end }}」{{ with $attribto }} {{ i18n "attribution_by" }} {{ with $attriburl }}<a href="{{ . }}" rel="dct:creator {{ with $attribrel }}{{ . }}{{ end }}">{{ end }}{{ $attribto | markdownify }}{{ with $attriburl }}</a>{{ end }} {{ i18n "word_is" }}
              {{ if ne $licensecode "publicdomain" }}
                {{/* ANY LICENSE */}}
                {{ i18n "attribution_licensedunder" }} <a href="{{ $licenseurl }}" rel="license noopener external nofollow">{{ if eq $licensecode "ccbysa4" }}{{ i18n "attribution_ccbysa4" }}{{ else }}{{ with $licensename }}{{ . }}{{ end }}{{ end }}</a>{{ i18n "punctuation_fullstop" }}
              {{ else }}
                {{/* PUBLIC DOMAIN */}}
                <a href="https://creativecommons.org/publicdomain/mark/1.0/" rel="license noopener external nofollow">{{ i18n "attribution_publicdomain" }}</a>{{ i18n "punctuation_fullstop" }}
              {{ end }}
            {{ end }}
            {{ with or $contentloc $datecreated $contentreferencetime }}<br/>
              {{ with $contentloc }}
                {{ i18n "word_location" }}{{ i18n "punctuation_colon" }} {{ with $contentlocurl }}<a href="{{ . }}" rel="{{ with $contentlocrel }}{{ . }}{{ end }}">{{ end }}{{ . }}{{ with $contentlocurl }}</a>{{ end }}
                {{ with or $datecreated $contentreferencetime }} | {{ end }}
              {{ end }}
              {{ with $datecreated }}
                {{ i18n "word_date" }}{{ i18n "punctuation_colon" }} {{ . }}
                {{ with and (ne $datecreated $contentreferencetime) ($contentreferencetime) }} | {{ end }}
              {{ end }}
              {{ with and (ne $datecreated $contentreferencetime) ($contentreferencetime) }}
                {{ i18n "word_time" }}{{ i18n "punctuation_colon" }} {{ . }}
              {{ end }}
            {{ end }}
          </small>
        {{ end }}
      </p>

{{- if eq $type "imagecoverattrib" }}
    </footer>
  </div>
{{ else }}
    </figcaption>
  </figure>
{{ end -}}
{{- if and (templates.Exists "partials/schemas/schema_ImageObject.html") (ne $type "imagecoverattrib") }}{{ partial "schemas/schema_ImageObject.html" . }}{{ end -}}
